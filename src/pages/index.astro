---
import { getCollection } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import { Icon } from "astro-icon/components";
import Render from "@/components/Render.astro";
import { Image } from "astro:assets";

const faq = await getCollection("faq");
const accordionId = (slug: string) => "faq-" + slug;
const accordionTriggerId = (slug: string) => "show-" + accordionId(slug);
---

<Layout title="PPI Aachen">
  <section class="mx-auto max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14">
    <div
      class="overflow-hidden before:absolute before:start-1/2 before:top-0 before:-z-[1] before:size-full before:-translate-x-1/2 before:transform before:bg-[url(/polygon-bg.svg)] before:bg-cover before:bg-top before:bg-no-repeat before:opacity-50"
    >
      <div class="mx-auto max-w-[85rem] px-4 pb-10 pt-24 sm:px-6 lg:px-8">
        <div class="flex justify-center">
          <a
            class="inline-flex items-center gap-x-2 rounded-full border border-gray-200 bg-white p-1 ps-3 text-sm text-gray-800 transition hover:border-gray-300 focus:border-gray-300 focus:outline-none"
            href="https://linktr.ee/aachenppi"
          >
            Check our bio
            <span
              class="inline-flex items-center justify-center gap-x-2 rounded-full bg-gray-200 px-2.5 py-1.5 text-sm font-semibold text-gray-600"
            >
              <Icon
                name="ph:caret-right"
                class="size-4 shrink-0"
                aria-hidden="true"
              />
            </span>
          </a>
        </div>
        <div class="mx-auto mt-5 max-w-2xl text-center">
          <h1
            class="block text-4xl font-bold text-gray-800 md:text-5xl lg:text-6xl"
          >
            Persatuan Pelajar Indonesia
            <span
              class="bg-gradient-to-tl from-blue-600 to-sky-600 bg-clip-text text-transparent"
              >Aachen</span
            >
          </h1>
        </div>
        <div class="mx-auto mt-5 max-w-3xl text-center">
          <p class="text-lg text-gray-600">
            Disini kami berkumpul bersama mengadakan berbagai kegiatan untuk
            Diaspora Indonesia yang bermukim di Aachen dan sekitarnya.
          </p>
          <p class="text-lg text-gray-600">
            Dari Pelajar Indonesia untuk Aachen.
          </p>
        </div>
        <div class="mt-8 flex justify-center gap-3">
          <a
            class="inline-flex items-center justify-center gap-x-3 rounded-md border border-transparent bg-blue-500 px-4 py-3 text-center text-sm font-medium text-white hover:bg-blue-600"
            href="https://kb.aachen.ppi.id/aachen-fuer-dummies"
          >
            Aachen for Dummies
            <Icon
              name="ph:caret-right"
              class="size-4 shrink-0"
              aria-hidden="true"
            />
          </a>
        </div>
      </div>
    </div>
  </section>
  <section class="mx-auto max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14">
    <div class="mb-10 text-center lg:mb-14">
      <h2 class="text-2xl font-bold md:text-4xl md:leading-tight">Events</h2>
      <p class="mt-1 text-gray-600">
        See how game-changing companies are making the most of every engagement
        with Preline.
      </p>
    </div>
    <div class="grid grid-cols-2 gap-4 sm:gap-6 md:gap-8 lg:gap-12">
      <a class="group flex flex-col focus:outline-none" href="#">
        <div
          class="aspect-h-12 aspect-w-16 overflow-hidden rounded-2xl bg-gray-100"
        >
          <Image
            width={584}
            height={438}
            class="rounded-2xl object-cover transition-transform duration-500 ease-in-out group-hover:scale-105 group-focus:scale-105"
            src="https://images.unsplash.com/photo-1575052814086-f385e2e2ad1b?q=80&w=560&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            alt="Blog Image"
          />
        </div>
        <div class="pt-4">
          <h3
            class="relative inline-block text-lg font-medium text-black before:absolute before:bottom-0.5 before:start-0 before:-z-[1] before:h-1 before:w-full before:origin-left before:scale-x-0 before:bg-sky-400 before:transition group-hover:before:scale-x-100"
          >
            eYoga
          </h3>
          <p class="mt-1 text-gray-600">
            A revamped and dynamic approach to yoga analytics
          </p>
          <div class="mt-3 flex flex-wrap gap-2">
            <span
              class="rounded-xl border border-gray-200 bg-white px-3 py-1.5 text-xs text-gray-600 sm:text-sm"
            >
              Discovery
            </span>
            <span
              class="rounded-xl border border-gray-200 bg-white px-3 py-1.5 text-xs text-gray-600 sm:text-sm"
            >
              Brand Guidelines
            </span>
            <span
              class="rounded-xl border border-gray-200 bg-white px-3 py-1.5 text-xs text-gray-600 sm:text-sm"
            >
              Yoga
            </span>
          </div>
        </div>
      </a>
      <a class="group flex flex-col focus:outline-none" href="#">
        <div
          class="aspect-h-12 aspect-w-16 overflow-hidden rounded-2xl bg-gray-100"
        >
          <Image
            width={584}
            height={438}
            class="rounded-2xl object-cover transition-transform duration-500 ease-in-out group-hover:scale-105 group-focus:scale-105"
            src="https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?q=80&w=560&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            alt="Blog Image"
          />
        </div>
        <div class="pt-4">
          <h3
            class="relative inline-block text-lg font-medium text-black before:absolute before:bottom-0.5 before:start-0 before:-z-[1] before:h-1 before:w-full before:origin-left before:scale-x-0 before:bg-sky-400 before:transition group-hover:before:scale-x-100"
          >
            Nike React
          </h3>
          <p class="mt-1 text-gray-600">
            Rewriting sport's playbook for billions of athletes
          </p>
          <div class="mt-3 flex flex-wrap gap-2">
            <span
              class="rounded-xl border border-gray-200 bg-white px-3 py-1.5 text-xs text-gray-600 sm:text-sm"
            >
              Brand Strategy
            </span>
            <span
              class="rounded-xl border border-gray-200 bg-white px-3 py-1.5 text-xs text-gray-600 sm:text-sm"
            >
              Visual Identity
            </span>
          </div>
        </div>
      </a>
      <a class="group flex flex-col focus:outline-none" href="#">
        <div
          class="aspect-h-12 aspect-w-16 overflow-hidden rounded-2xl bg-gray-100"
        >
          <Image
            width={584}
            height={438}
            class="rounded-2xl object-cover transition-transform duration-500 ease-in-out group-hover:scale-105 group-focus:scale-105"
            src="https://images.unsplash.com/photo-1649999920973-ab6bfd0c0017?q=80&w=560&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            alt="Blog Image"
          />
        </div>
        <div class="pt-4">
          <h3
            class="relative inline-block text-lg font-medium text-black before:absolute before:bottom-0.5 before:start-0 before:-z-[1] before:h-1 before:w-full before:origin-left before:scale-x-0 before:bg-sky-400 before:transition group-hover:before:scale-x-100"
          >
            Day Spa
          </h3>
          <p class="mt-1 text-gray-600">Designing a new cocktail can</p>

          <div class="mt-3 flex flex-wrap gap-2">
            <span
              class="rounded-xl border border-gray-200 bg-white px-3 py-1.5 text-xs text-gray-600 sm:text-sm"
            >
              Brand Strategy
            </span>
            <span
              class="rounded-xl border border-gray-200 bg-white px-3 py-1.5 text-xs text-gray-600 sm:text-sm"
            >
              Visual Identity
            </span>
          </div>
        </div>
      </a>
      <a class="group flex flex-col focus:outline-none" href="#">
        <div
          class="aspect-h-12 aspect-w-16 overflow-hidden rounded-2xl bg-gray-100"
        >
          <Image
            width={584}
            height={438}
            class="rounded-2xl object-cover transition-transform duration-500 ease-in-out group-hover:scale-105 group-focus:scale-105"
            src="https://images.unsplash.com/photo-1528291954423-c0c71c12baeb?q=80&w=560&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            alt="Blog Image"
          />
        </div>
        <div class="pt-4">
          <h3
            class="relative inline-block text-lg font-medium text-black before:absolute before:bottom-0.5 before:start-0 before:-z-[1] before:h-1 before:w-full before:origin-left before:scale-x-0 before:bg-sky-400 before:transition group-hover:before:scale-x-100"
          >
            Diamond Dynamics
          </h3>
          <p class="mt-1 text-gray-600">
            From cutting-edge equipment to stylish apparel
          </p>

          <div class="mt-3 flex flex-wrap gap-2">
            <span
              class="rounded-xl border border-gray-200 bg-white px-3 py-1.5 text-xs text-gray-600 sm:text-sm"
            >
              Sports Gear
            </span>
            <span
              class="rounded-xl border border-gray-200 bg-white px-3 py-1.5 text-xs text-gray-600 sm:text-sm"
            >
              Equipment
            </span>
            <span
              class="rounded-xl border border-gray-200 bg-white px-3 py-1.5 text-xs text-gray-600 sm:text-sm"
            >
              Discovery
            </span>
          </div>
        </div>
      </a>
    </div>
  </section>
  <section class="mx-auto max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14">
    <div class="grid gap-10 md:grid-cols-5">
      <div class="md:col-span-2">
        <div class="max-w-xs">
          <h2 class="text-2xl font-bold md:text-4xl md:leading-tight">
            Frequently<br />asked questions
          </h2>
          <p class="mt-1 hidden text-gray-600 md:block">
            Answers to the most frequently asked questions.
          </p>
        </div>
      </div>
      <div id="faq-accordion" class="md:col-span-3">
        <div class="divide-y divide-gray-200">
          {
            faq.map((qna, idx) => (
              <div class="pb-3 pt-6">
                <button
                  id={accordionTriggerId(qna.slug)}
                  type="button"
                  class="inline-flex w-full items-center justify-between gap-x-3 rounded-lg pb-3 text-start font-semibold text-gray-800 hover:text-gray-500 focus:text-gray-500 focus:outline-none md:text-lg"
                  aria-controls={accordionId(qna.slug)}
                  aria-expanded={idx === 0 ? "true" : "false"}
                >
                  <span>{qna.data.question}</span>
                  <Icon
                    name="ph:caret-up"
                    class="block size-5 shrink-0 rotate-180 text-gray-600 transition-transform duration-200 ease-in-out"
                    aria-hidden="true"
                  />
                </button>
                <div
                  id={accordionId(qna.slug)}
                  class="w-full overflow-hidden"
                  aria-labelledby={accordionTriggerId(qna.slug)}
                >
                  <div class="text-gray-600">
                    <div class="mb-2 text-gray-500">
                      <Render collectionKey="faq" slug={qna.slug} />
                    </div>
                  </div>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  #faq-accordion .active > svg {
    @apply rotate-0;
  }
  #faq-accordion .inactive > svg {
    @apply rotate-180;
  }
</style>

<script>
  document.addEventListener("astro:page-load", async () => {
    const { default: Accordion } = await import(
      "flowbite/lib/esm/components/accordion"
    );

    const faqRootId = "faq-accordion";
    const accordionElement = document.getElementById(faqRootId);

    if (!accordionElement) return;

    const faqIds = [];
    const accordionItemWrappers = accordionElement.children[0].children;
    for (let accordionItemWrapper of accordionItemWrappers) {
      const accordionBody = accordionItemWrapper.querySelector("div");
      if (accordionBody && accordionBody.id.startsWith("faq-")) {
        faqIds.push(accordionBody.id);
      }
    }

    const accordionItems = faqIds.map((faqId) => ({
      id: faqId,
      triggerEl: document.querySelector("#show-" + faqId) as HTMLElement,
      targetEl: document.querySelector("#" + faqId) as HTMLElement,
      active: true,
    }));

    const options = {
      alwaysOpen: false,
      activeClasses: "active",
      inactiveClasses: "inactive",
    };

    const instanceOptions = {
      id: faqRootId,
      override: true,
    };

    new Accordion(accordionElement, accordionItems, options, instanceOptions);
  });
</script>
